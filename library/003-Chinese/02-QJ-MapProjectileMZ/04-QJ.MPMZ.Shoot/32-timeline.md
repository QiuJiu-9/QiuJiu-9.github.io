# timeline
<font size=4>这个属性可以在时间线上设计一些特殊的效果。   
此属性的基础格式为：   
[effect data1,effect data2,effect data3......]   
<br />每个effect data的基础格式为：   
[type,before start time,loop time,value,loop times]   
<br />其中type是一个字符，代表不同的效果，比如改变弹幕移动角度，让弹幕缩放，让弹幕震动。每个effect data都代表一个完整的效果，这个效果从弹幕生成后“before start time”帧后开始，每隔“loop time”帧执行一次此效果。   
<br />before start time：写大于等于0的数字。默认是0，代表着弹幕刚生成时就执行一次效果，然后开始循环。   
<br />loop time：写大于等于0的数字，默认是5，代表每5帧就执行一次效果。写0时代表每帧都执行一次效果。写-1时代表只执行一次，不进行循环。   
loop times：循环次数，默认是-1，代表循环无限次，可以不写。当loop time写-1时，此项（也就是loop times，注意time是时间，times是次数，后者多了个s）也会被强制设定为0，即只执行一次，执行完后不再（就是那个0的意思）进行循环。此项写0时代表不循环。   
<br />value：按照下表中的type和value对应表来写值。在一次循环中可以设定多个value来使其有更多的变化。   
写法为 {time1:value1,time2:value2,time3:value3......}。   
在每次循环内的第time1/time2/time3...时均按照value1/value2/value3...执行一次效果。需要注意的是，如果loop time不是-1，那么这里的time的值是从0到loop time-1，不包含loop time。比如你写['R',0,8,{8:3}]时，time是从0到7（8-1）循环，永远也不会到8，故而这样写无效。</font>


| type | meaning |                             note                             |           value            |                          value note                          |                          example                          |
| :--: | :-----: | :----------------------------------------------------------: | :------------------------: | :----------------------------------------------------------: | :-------------------------------------------------------: |
| 'R'  | rotate  | 让弹幕的移动角度在某个时候进行旋转。<br />此旋转与imgRotation中的旋转不同，imgRotation只改变弹幕图片的角度，而此旋转是改变弹幕的移动角度，当moveType为某些值（例如QC,B,F,D等）时此旋转无效。 |            数字            |                写旋转的角度值，单位是度每帧。                | ['R',0,0,1]<br /> ['R',15,5,-2]<br /> ['R',0,8,{0:4,3:4}] |
| 'B'  | breathe |    呼吸效果，即让弹幕缩放到某个大小，然后再缩放回原大小。    |   [缩放大小,花费的时间]    | 缩放大小是指相对于当前弹幕大小的比例，写1时代表原大小。<br />花费的时间是指弹幕缩放到某个大小的时间，因为弹幕还要缩放回去，故而这个效果起效的总时间实际上是此值的两倍。 |                    ['B',0,60,[0.5,15]]                    |
| ‘S’  |  shake  | 震动，让弹幕朝一个方向移动一段距离后返回。<br />注意！此值并不改变弹幕判定的实际位置（决定碰撞，弹幕位置读取），只是显示效果。 | [方向角度,距离,花费的时间] | 方向角度：震动的方向，单位是度，写0到360的数字，写-1时代表0到360的随机角度，写-2时代表向弹幕当前的移动方向震动，写-3时代表向弹幕当前的图像角度震动。<br />距离：震动的幅度，单位是像素。<br />花费的时间：震动到最大距离的时间，实际震动一次还得震动回来，故而这个效果起效的总时间实际上是此值的两倍。 |                   ['B',0,60,[-1,24,15]]                   |
| 'F'  | flicker |                    闪烁，变透明然后复原。                    | [不透明度大小,花费的时间]  | 不透明度大小是指相对于当前弹幕不透明度的比例，写1时代表原不透明度。<br />花费的时间是指弹幕淡出到某个不透明度的时间，因为弹幕还要复原，故而这个效果起效的总时间实际上是此值的两倍。 |                     ['B',0,60,[0,15]]                     |

<font size=4>完整的范例：</font>

```javascript
timeline:[['R',0,0,1]],//只有一个效果时取消最外层的[]也行，比如可以写成timeline:['Rotate',0,0,1],
    //此项的效果是让弹幕自生成起（第一个0）每帧（第二个0）旋转1（最后一个1）度。
timeline:[['R',15,5,-2]],//此项的效果是让弹幕自生成15帧后起，每5帧旋转-2度。
timeline:[['R',30,-1,90]],//此项的效果是让弹幕在生成30帧后旋转90度，然后就无其他效果。不循环是因为这里的loop time是-1，意思是不循环。
timeline:[['R',0,8,{0:7,3:-7}]],//此项的效果是让弹幕自生成起，每隔8帧循环起一些效果。具体来说，第0（8*0+0）帧旋转7度，第3（8*0+3）帧旋转-7度。
    //第8帧（8*1+0）旋转7度，第11（8*1+3）帧旋转-7度，第16帧（8*2+0）旋转7度，第19（8*2+3）帧旋转-7度...不断循环。
    
timeline:[['R',9,-1,10],['R',18,-1,-10]],//此项的效果是让弹幕生成后第9帧时旋转10度，第18帧时旋转-10度。
timeline:[['R',0,-1,{9:10,18:-10}]],//此项的效果和上一条效果一模一样，单独写出来方便理解。
timeline:[['R',9,-1,{0:10,9:-10}]],//此项的效果和上一条，上上条效果一模一样，单独写出来方便理解。
    
timeline:[['B',0,60,[0.5,15]]],//每60帧弹幕缩放一次，在15帧内缩放为原来一半，然后在接下来15帧内复原为原来大小。
timeline:[['B',7,60,{0:[0.8,10],20:[0.6,10],40:[0.4,10]}]],//在弹幕生成后：
    //从第7（7+0+10*0）帧到第17（7+0+10*1）帧时缩放为原来的80%，从第17（7+0+10*1）帧到第27（7+0+10*2）帧复原。
    //从第27（7+20+10*0）帧到第37（7+20+10*1）帧时缩放为原来的60%，从第37（7+20+10*1）帧到第47（7+20+10*2）帧复原。
    //从第47（7+40+10*0）帧到第57（7+40+10*1）帧时缩放为原来的60%，从第57（7+40+10*1）帧到第67（7+40+10*2）帧复原。
    //接下来开始循环。
    //从第67（7+0+10*0）帧到第77（7+0+10*1）帧时缩放为原来的80%，从第77（7+0+10*1）帧到第87（7+0+10*2）帧复原。
    //从第87（7+20+10*0）帧到第97（7+20+10*1）帧时缩放为原来的60%，从第97（7+20+10*1）帧到第107（7+20+10*2）帧复原。
    //从第107（7+40+10*0）帧到第117（7+40+10*1）帧时缩放为原来的60%，从第117（7+40+10*1）帧到第127（7+40+10*2）帧复原。
    //之后也是不断循环。从第7帧开始，以60帧为一次循环。
    
//B，S，F用法差不多，故而不再写S和F更多的例子。
```

